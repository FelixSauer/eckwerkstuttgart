---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Section from "../components/Section.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import type { INavigation } from "../types/navigation";

const pages = await getCollection("pages");

const navigation: INavigation[] = pages.map(
  (page: any): INavigation => ({
    page: page,
    title: page.data.title,
    navigation: page.data.navigation,
    slug: page.slug,
  }),
);

const navigationHeader = navigation.filter((nav) =>
  nav.navigation.includes("Header"),
);
const navigationFooter = navigation.filter((nav) =>
  nav.navigation.includes("Footer"),
);
---

<Layout title="Eckwerk Stuttgart">
  <Header navigation={navigationHeader} />
  <main>
    {
      pages.map((originPage) => {
        return <Section page={originPage} />;
      })
    }
  </main>
  <Footer navigation={navigationFooter} />
</Layout>

<style lang="scss">
  main {
    padding-top: 50px;
    display: flex;
    flex-direction: column;
  }
</style>

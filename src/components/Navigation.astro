---
import type { INavigation } from "../types/navigation";

interface Props {
  navigation: INavigation[];
  navigationPostion: string;
}

const { navigation } = Astro.props;
const { navigationPostion } = Astro.props;

---

<nav>
  <ul>
    {
      navigation.map((item) => {
        return (
          <li>
            <a
              href={
                navigationPostion === "header" ? "#" + item.title : item.title
              }
              data-href={item.title}
              aria-current="page"
            >
              {item.title}
            </a>
          </li>
        );
      })
    }
  </ul>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const navigationLinks = document.querySelectorAll("nav ul li a[data-href]");
    const currentPath = window.location;


    navigationLinks.forEach((link) => {
      //Set init active link
      if(currentPath.hash === "") {
        //Set first link active
        link[0].classList.add('active');
      }

      //Set active link
      if(link.getAttribute("data-href") === currentPath.hash) {
        link.classList.add('active');
      }
    });



    console.log(navigationLinks);




  });
</script>

<style lang="scss">
  @import "./../styles/GlobalStyling";

  nav {
    align-items: center;

    ul {
      display: flex;
      list-style: none;
      margin: unset;
      padding: unset;

      li {
        margin-right: $spacing-l;
        font-weight: 300;


        &:last-child {
          margin-right: unset;
        }

        a {
          color: $color-white;
          text-decoration: none;
          text-transform: uppercase;
          font-family: Source Code Pro Variable, sans-serif;

          padding: $spacing-s;

          &:hover {
            color: $color-accent-3;
          }

          &:active {
            color: $color-gray-6;
          }
        }
      }
    }
  }
</style>
